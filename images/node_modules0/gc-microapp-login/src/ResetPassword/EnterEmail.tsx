import React from 'react';
import { FormRenderProps } from 'react-final-form';
import { FormattedMessage, InjectedIntlProps, injectIntl } from 'react-intl';
import { InputFinalField } from 'shared-react-atomic-ui/finalform-fields';

import { Button } from '@buffet/button';
import { Routes } from '../common/App/routes';
import { SubmitButton } from '../common/App/SubmitButton';
import { MessagePanel } from '../common/MessagePanel/MessagePanel';
import { Message, MessageType } from '../common/types';

interface EnterEmailOwnProps {
  isSubmitting: boolean;
  message: Message | undefined;
  setMessage: React.Dispatch<React.SetStateAction<Message | undefined>>;
}

type EnterEmailProps = FormRenderProps & EnterEmailOwnProps & InjectedIntlProps;

export function EnterEmail({
  handleSubmit,
  isSubmitting,
  intl,
  message,
  setMessage,
  values,
}: EnterEmailProps) {

  return (

    <form onSubmit={handleSubmit}>
      <div className="login-content login-content--spacing-xxlarge">
        <MessagePanel message={message} />
        <InputFinalField
          name="email"
          label={intl.formatMessage({ id: 'Email' })}
          data-testid="email-text-input"
        />
        <SubmitButton
          inProgress={isSubmitting}
          label={intl.formatMessage({ id: 'Send' })}
          data-testid="submit-button"
        />
      </div>
      <div className="login-footer">
        <Button type="link" theme="link" to={Routes.Login}><FormattedMessage id="BackToSignIn" /></Button>
      </div>
    </form>
  );
}

export default injectIntl(EnterEmail);
