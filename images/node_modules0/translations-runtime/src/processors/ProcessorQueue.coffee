module.exports = (Promise) ->

  class ProcessorQueue

    @run: (context, commands) ->
      (new ProcessorQueue(context,commands)).run()

    constructor: (@context, @commands) ->

    run: ->
      Promise.each(@commands, @runProcess)
        .then(@getResult)

    runProcess: (command) ->
      command.run()

    getResult: =>
      @context.result
