"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var max_1 = require("./max");
/**
 * Gets the max value from an arrays visible values
 * If the array is not number based it will return the length instead
 */
exports.getMaxVal = function (_a) {
    var _b = _a === void 0 ? {} : _a, data = _b.data, key = _b.key;
    if (!data || !key) {
        throw new Error('Missing data or key');
    }
    var array = data
        .filter(function (d) { return typeof d[key] !== 'undefined'; })
        .filter(function (d) { return d.isVisible !== false; })
        .map(function (d) { return d[key]; });
    if (array.length === 0) {
        return 0;
    }
    var arrayIsAllNumbers = array.every(function (el) { return typeof el === 'number'; });
    if (arrayIsAllNumbers) {
        return max_1.max(array);
    }
    return array.length - 1;
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL2FwcC9zcmMvdXRpbHMvZ2VuZXJhbC9nZXRNYXhWYWwudHMiLCJtYXBwaW5ncyI6Ijs7QUFBQSw2QkFBNEI7QUFPNUI7OztHQUdHO0FBQ1UsUUFBQSxTQUFTLEdBQUcsVUFBQyxFQUE4QjtRQUE5Qiw0QkFBOEIsRUFBNUIsY0FBSSxFQUFFLFlBQUc7SUFDbkMsSUFBSSxDQUFDLElBQUksSUFBSSxDQUFDLEdBQUcsRUFBRTtRQUNqQixNQUFNLElBQUksS0FBSyxDQUFDLHFCQUFxQixDQUFDLENBQUM7S0FDeEM7SUFFRCxJQUFNLEtBQUssR0FBRyxJQUFJO1NBQ2YsTUFBTSxDQUFDLFVBQUMsQ0FBQyxJQUFLLE9BQUEsT0FBTyxDQUFDLENBQUMsR0FBRyxDQUFDLEtBQUssV0FBVyxFQUE3QixDQUE2QixDQUFDO1NBQzVDLE1BQU0sQ0FBQyxVQUFDLENBQUMsSUFBSyxPQUFBLENBQUMsQ0FBQyxTQUFTLEtBQUssS0FBSyxFQUFyQixDQUFxQixDQUFDO1NBQ3BDLEdBQUcsQ0FBQyxVQUFDLENBQUMsSUFBSyxPQUFBLENBQUMsQ0FBQyxHQUFHLENBQUMsRUFBTixDQUFNLENBQUMsQ0FBQztJQUV0QixJQUFJLEtBQUssQ0FBQyxNQUFNLEtBQUssQ0FBQyxFQUFFO1FBQ3RCLE9BQU8sQ0FBQyxDQUFDO0tBQ1Y7SUFFRCxJQUFNLGlCQUFpQixHQUFHLEtBQUssQ0FBQyxLQUFLLENBQUMsVUFBQyxFQUFFLElBQUssT0FBQSxPQUFPLEVBQUUsS0FBSyxRQUFRLEVBQXRCLENBQXNCLENBQUMsQ0FBQztJQUV0RSxJQUFJLGlCQUFpQixFQUFFO1FBQ3JCLE9BQU8sU0FBRyxDQUFDLEtBQUssQ0FBQyxDQUFDO0tBQ25CO0lBRUQsT0FBTyxLQUFLLENBQUMsTUFBTSxHQUFHLENBQUMsQ0FBQztBQUMxQixDQUFDLENBQUMiLCJuYW1lcyI6W10sInNvdXJjZXMiOlsiL2FwcC9zcmMvdXRpbHMvZ2VuZXJhbC9nZXRNYXhWYWwudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgbWF4IH0gZnJvbSAnLi9tYXgnO1xuXG5pbnRlcmZhY2UgSUdldE1heFZhbCB7XG4gIGRhdGE/OiBhbnlbXTtcbiAga2V5Pzogc3RyaW5nO1xufVxuXG4vKipcbiAqIEdldHMgdGhlIG1heCB2YWx1ZSBmcm9tIGFuIGFycmF5cyB2aXNpYmxlIHZhbHVlc1xuICogSWYgdGhlIGFycmF5IGlzIG5vdCBudW1iZXIgYmFzZWQgaXQgd2lsbCByZXR1cm4gdGhlIGxlbmd0aCBpbnN0ZWFkXG4gKi9cbmV4cG9ydCBjb25zdCBnZXRNYXhWYWwgPSAoeyBkYXRhLCBrZXkgfTogSUdldE1heFZhbCA9IHt9KTogbnVtYmVyID0+IHtcbiAgaWYgKCFkYXRhIHx8ICFrZXkpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgZGF0YSBvciBrZXknKTtcbiAgfVxuXG4gIGNvbnN0IGFycmF5ID0gZGF0YVxuICAgIC5maWx0ZXIoKGQpID0+IHR5cGVvZiBkW2tleV0gIT09ICd1bmRlZmluZWQnKVxuICAgIC5maWx0ZXIoKGQpID0+IGQuaXNWaXNpYmxlICE9PSBmYWxzZSlcbiAgICAubWFwKChkKSA9PiBkW2tleV0pO1xuXG4gIGlmIChhcnJheS5sZW5ndGggPT09IDApIHtcbiAgICByZXR1cm4gMDtcbiAgfVxuXG4gIGNvbnN0IGFycmF5SXNBbGxOdW1iZXJzID0gYXJyYXkuZXZlcnkoKGVsKSA9PiB0eXBlb2YgZWwgPT09ICdudW1iZXInKTtcblxuICBpZiAoYXJyYXlJc0FsbE51bWJlcnMpIHtcbiAgICByZXR1cm4gbWF4KGFycmF5KTtcbiAgfVxuXG4gIHJldHVybiBhcnJheS5sZW5ndGggLSAxO1xufTtcbiJdLCJ2ZXJzaW9uIjozfQ==