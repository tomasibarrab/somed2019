import { shallow } from 'enzyme';
import React from 'react';

import { Button } from '@buffet/button';

import { Props, PureLandingPage as LandingPage } from './LandingPage';

describe('<LandingPage />', () => {
  const setup = () => {
    const props: Props = {
      intl: { formatMessage: jest.fn() } as any,
      updateDisplayState: jest.fn(),
    };
    const landingPage = shallow(<LandingPage {...props} />);

    return { landingPage, props };
  };

  it('should have a buffet button that calls updateDisplayState when clicked', () => {
    const { landingPage, props } = setup();

    const startButtons = landingPage.find(Button);
    startButtons.at(0).simulate('click');

    expect(props.updateDisplayState).toHaveBeenCalledWith('posSelect');
    expect(props.updateDisplayState).toHaveBeenCalledTimes(1);
  });
});
