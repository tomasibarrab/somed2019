import { shallow } from 'enzyme';
import React from 'react';

import { SupportedPosBrandsIds } from '../store/types';
import AlohaContainer from './Aloha/AlohaContainer';
import DefaultWaiting from './Default/DefaultWaiting';
import DoshiiWaiting from './Doshii/DoshiiWaiting';
import { NextStepsProps, PureNextStepsPage } from './NextStepsPage';
import ToastContainer from './Toast/ToastContainer';
import UpserveNextSteps from './Upserve/UpserveNextSteps';

describe('<NextSteps />', () => {
  const setup = (brandId: SupportedPosBrandsIds) => {
    const props: NextStepsProps = { brandId };

    const nextStepsPage = shallow(<PureNextStepsPage {...props} />);

    return { nextStepsPage, props };
  };

  it('should display Aloha content for aloha id', () => {
    const { nextStepsPage } = setup(SupportedPosBrandsIds.Aloha);
    expect(nextStepsPage.find(AlohaContainer).length).toBe(1);
  });

  it('should display Toast content for toast id', () => {
    const { nextStepsPage } = setup(SupportedPosBrandsIds.Toast);
    expect(nextStepsPage.find(ToastContainer).length).toBe(1);
  });

  it('should display Upserve content for upserve id', () => {
    const { nextStepsPage } = setup(SupportedPosBrandsIds.Upserve);
    expect(nextStepsPage.find(UpserveNextSteps).length).toBe(1);
  });

  it('should display Doshii content for H&L and Impos id', () => {
    const { nextStepsPage: imposNextSteps } = setup(SupportedPosBrandsIds.Impos);
    expect(imposNextSteps.find(DoshiiWaiting).length).toBe(1);

    const { nextStepsPage: HAndLNextSteps } = setup(SupportedPosBrandsIds['H&L']);
    expect(HAndLNextSteps.find(DoshiiWaiting).length).toBe(1);
  });

  it('should display Generic content for all other ids', () => {
    const { nextStepsPage } = setup(SupportedPosBrandsIds['Micros 3700']);
    expect(nextStepsPage.find(DefaultWaiting).length).toBe(1);
  });
});
