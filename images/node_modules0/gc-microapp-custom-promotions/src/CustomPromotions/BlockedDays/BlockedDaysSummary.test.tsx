import { mount } from 'enzyme';
import React from 'react';
import { IntlProvider } from 'react-intl';
import messages from '../../i18n/custom-promotions';
import { BlockedDaysSummary } from './BlockedDaysSummary';

const renderComponent = (props: any) =>
  mount(
    <IntlProvider messages={messages} locale="en-US">
      <BlockedDaysSummary {...props} />
    </IntlProvider>,
  );

// Sometimes it makes sense for properties to not be in alphabetical order...
// tslint:disable:object-literal-sort-keys
describe('<BlockedDaysSummary />', () => {
  const scenarios = [
    {
      description: 'one custom day',
      custom: { '2018-02-02': true, '2018-02-03': false },
      customCount: 1,
      default: {},
      defaultCount: 0,
    },
    {
      description: 'one default day',
      custom: { '2018-02-02': false, '2018-02-03': false },
      customCount: 0,
      default: { mothers_day_us: true, new_years_day: false },
      defaultCount: 1,
    },
    {
      description: 'two custom days and two default days',
      custom: { '2018-02-02': true, '2018-02-03': true },
      customCount: 2,
      default: { mothers_day_us: true, new_years_day: true, new_years_eve: false },
      defaultCount: 2,
    },
  ];

  scenarios.forEach(({ description, custom: customDates, default: defaultDates, customCount, defaultCount }) => {
    test(`renders ${description}`, () => {
      const wrapper = renderComponent({ custom: customDates, default: defaultDates });

      const custom = wrapper.find('.custom li');
      const defaultList = wrapper.find('.default li');

      expect(custom.length).toEqual(customCount);
      expect(defaultList.length).toEqual(defaultCount);
    });
  });
});
