import React from 'react';
import { FormRenderProps } from 'react-final-form';

import { UserIcon } from 'gca-react-components';

import { Panel } from '@buffet/panel';

import { CheckboxFinalField, InputFinalField } from 'shared-react-atomic-ui/finalform-fields';

import strings from '../../strings';
import { headerButtonStyle } from '../../styles';
import { SaveUser } from './SaveUser';

import './UserEditor.scss';

interface UserEditorOwnProps {
  isSubmitting: boolean;
  onSubmit: (values: any) => Promise<object | undefined> | undefined;
  onCancel: () => void;
}

type UserEditorProps = UserEditorOwnProps & FormRenderProps;

export function UserEditor({handleSubmit, onCancel, isSubmitting, values}: UserEditorProps) {
  return (
    <form onSubmit={handleSubmit}>
      <Panel
        title={strings['users.new.title']}
        headerContent={<SaveUser inProgress={isSubmitting} onSubmit={handleSubmit} onCancel={onCancel} />}
        customHeaderStyle={headerButtonStyle}
      >
        <div className="user-form">
          <div className="user-form-info">
            <UserIcon width="140px" color="#999" />
            <div className="user-form-info-name">{values.firstName || ''} {values.lastName || ''}</div>
          </div>
          <div className="user-form-panel">
            <InputFinalField
              name="primaryEmail"
              label="User Email address"
              className="field"
              autoFocus={true}
            />
            <InputFinalField
              name="firstName"
              label="First Name"
              className="field"
            />
            <InputFinalField
              name="lastName"
              label="Last Name"
              className="field"
            />
            <InputFinalField
              name="cellPhone"
              label="Mobile Phone Number"
              className="field"
            />
            <CheckboxFinalField
              name="enabled2fa"
              label="Two Factors Authentication"
              className="field"
            />
          </div>
        </div>
      </Panel>
    </form>
  );
}
