import trim from 'lodash/trim';
import { isEmpty, path } from 'ramda';

import * as React from 'react';

import { Key, RidData } from '../../types';
import CodeBlock from '../CodeBlock/CodeBlock';

import './DataDisplay.scss';

export default function DataKeyValueDisplay(props: RidData) {
  const { title, data, keys } = props;
  if (title && data && keys ) {
    return (
      <div className="data-container">
        <h3>{title}</h3>
        {keys.map((dataItem: Key) => {
          const value = path(dataItem.key.split('.'), data);
          return (dataItem.optional && value === undefined)
          ? (null)
          : (
            <div key={dataItem.key} className="data-item">
              <span className="key">{dataItem.label}</span>
              <span className="value">{ value !== undefined || !isEmpty(value)
                ? trim( JSON.stringify(value, null, 2), '"')
                : 'N/A' }
              </span>
            </div>
            );
        })}
        <div className="data-spacer" />
        <CodeBlock data={data} />
      </div>
    );
  } else {
    return (
      <div className="data-container"></div>
    );
  }

}
