#!/bin/bash

# usage: ./build-test-distribute.sh "[patch|minor|major]"

DEFAULT_VERSION_TYPE="patch"
DEFAULT_SKIP_TAGGING=""

VERSION_TYPE=${1-$DEFAULT_VERSION_TYPE}
SKIP_TAGGING=${2-$DEFAULT_SKIP_TAGGING}

set -o errexit -o nounset

cd /app/build-scripts/ && ./build.sh

cd /app/build-scripts/ && ./test.sh

cd /app/build-scripts/ && ./publish.sh $VERSION_TYPE $SKIP_TAGGING
