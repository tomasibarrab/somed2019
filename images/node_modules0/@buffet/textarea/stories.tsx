import React from 'react';
import { IntlProvider } from '@buffet/intl';
import { storiesOf } from '@storybook/react';
import { TextArea } from './src/textarea';

interface State {
  value: string;
  valid: boolean;
}

class TextAreaStory extends React.Component<any, State> {
  text =
    'Golang is a programming language initially developed at Google in year 2007 by Robert Griesemer, Rob Pike, and Ken Thompson. Go programming language is a statically-typed language with syntax similar to that of C. It provides garbage collection, type safety, dynamic-typing capability, many advanced built-in types such as variable length arrays and key-value maps. It also provides a rich standard library. Go is expressive, concise, clean, and efficient. Its concurrency mechanisms make it easy to write programs that get the most out of multi core and networked machines, while its novel type system enables flexible and modular program construction. Go compiles quickly to machine code yet has the convenience of garbage collection and the power of run-time reflection. Itâ€™s a fast, statically typed, compiled language that feels like a dynamically typed, interpreted language.';

  state = {
    value: '',
    valid: true
  };

  empty = () => {
    this.setState({ value: '', valid: true });
  };

  full = () => {
    this.setState({ value: this.text, valid: true });
  };

  invalid = () => {
    this.setState({ value: this.text.slice(0, 88), valid: false });
  };

  onChange = (value: any) => {
    const valid = value.length >= 100;
    this.setState({ value, valid });
  };

  render() {
    return (
      <IntlProvider>
        <div style={{ padding: '40px', backgroundColor: 'white' }}>
          <div style={{ width: '500px', margin: '20px' }}>
            <TextArea
              min={100}
              value={this.state.value}
              valid={this.state.valid}
              placeholder="Tell us a little about Opentable buffet textarea component"
              onChange={this.onChange}
              rows={6}
            />
          </div>
          <br />
          <div style={{ display: 'flex', margin: '20px' }}>
            <button onClick={this.empty}>Empty</button>
            <button onClick={this.full}>Full</button>
            <button onClick={this.invalid}>Invalid</button>
          </div>
        </div>
      </IntlProvider>
    );
  }
}

storiesOf('TextArea', module).add('Simple textarea', () => <TextAreaStory />);
