import { mount } from 'enzyme';
import moment from 'moment';
import React from 'react';
import { IntlProvider } from 'react-intl';
import { MemoryRouter } from 'react-router';
import { create } from 'react-test-renderer';
import { CampaignState, ModalType } from '../../store/campaigns/campaigns.types';
import { keys } from '../../translations/bundles/marketing.json';
import CustomPromotionsIntroduction from './CustomPromotionsIntroduction';

describe('<CustomPromotionsIntroduction />', () => {
  describe('render', () => {
    test(`It renders fine`, () => {
      const component = create(
        <IntlProvider locale="en-US" messages={keys}>
          <MemoryRouter>
            <CustomPromotionsIntroduction />
          </MemoryRouter>
        </IntlProvider>,
      );
      const tree = component.toJSON();
      expect(tree).toMatchSnapshot();
    });

    test(`Clicking on the section opens the introduction`, () => {
      const wrapper = mount(
        <IntlProvider locale="en-US" messages={keys}>
          <MemoryRouter>
            <CustomPromotionsIntroduction />
          </MemoryRouter>
        </IntlProvider>,
      );

      const section = () => wrapper.find(`[data-testid="customPromotionExpandableSection"]`).first();
      section().simulate('click');

      expect(section().hasClass('expandable')).toBe(true);
    });
  });
});
