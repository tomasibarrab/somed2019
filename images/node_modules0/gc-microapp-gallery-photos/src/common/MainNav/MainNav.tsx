import { Nav, NavIcon, NavLabel } from 'gca-react-components';
import * as React from 'react';
import { FormattedMessage, injectIntl } from 'react-intl';
import useRestaurantToggles from 'shared-react-utils/useRestaurantToggles';
import BasicInfoIcon from './BasicInfo';
import DiningExperienceIcon from './DiningExperienceIcon';
import './MainNav.scss';
import MenusIcon from './MenusIcon';
import PhotosIcon from './PhotosIcon';
import ResWidgetIcon from './ResWidgetIcon';

interface Props {
  rid: number;
}

// TODO: check https://github.com/opentable/gc-microapp-profile/tree/master/src/common/MainNav
// INFO: https://mariusschulz.com/blog/typing-destructured-object-parameters-in-typescript
function MainNav({ rid }: Props) {
  const isMenusEnabled = useRestaurantToggles(rid, 'gcaProfileMenus');
  const isResWidgetEnabled = useRestaurantToggles(rid, 'gcaProfileResWidget');
  return (
    <Nav>
      <a href={`/profile/${rid}/basic-info`}>
        <NavIcon>
          <BasicInfoIcon />
        </NavIcon>
        <NavLabel>
          <FormattedMessage id="galleryPhotos.nav.basicInfo" />
        </NavLabel>
      </a>
      <a href={`/profile/${rid}/dining-experience`}>
        <NavIcon>
          <DiningExperienceIcon />
        </NavIcon>
        <NavLabel>
          <FormattedMessage id="galleryPhotos.nav.diningExperience" />
        </NavLabel>
      </a>
      <a href={`/profile/${rid}/photos`}>
        <NavIcon>
          <PhotosIcon />
        </NavIcon>
        <NavLabel>
          <FormattedMessage id="galleryPhotos.nav.profilePhoto" />
        </NavLabel>
      </a>
      <a href={`/profile/${rid}/gallery-photos`} className="mainnav--gallery-photos">
        <NavIcon>
          <PhotosIcon />
        </NavIcon>
        <NavLabel>
          <FormattedMessage id="galleryPhotos.nav.galleryPhotos" />
        </NavLabel>
      </a>
      {isResWidgetEnabled && (
        <a href={`/profile/${rid}/reservation-widget`}>
          <NavIcon>
            <ResWidgetIcon />
          </NavIcon>
          <NavLabel>
            <FormattedMessage id="galleryPhotos.nav.reservationWidget" />
          </NavLabel>
        </a>
      )}
      {isMenusEnabled && (
        <a href={`/profile/${rid}/menus`}>
          <NavIcon>
            <MenusIcon />
          </NavIcon>
          <NavLabel>
            <FormattedMessage id="galleryPhotos.nav.menus" />
          </NavLabel>
        </a>
      )}
    </Nav>
  );
}

export default injectIntl(MainNav);
