/**
 * Reports List - list review reports
 * Data is passed in via props.reports
 */

import { Table } from 'gca-react-components';
import React from 'react';
import { FormattedMessage } from 'react-intl';

import EditReport from '../EditReport/EditReport';
import ShowReport from '../ShowReport/ShowReport';

import './ReportsList.scss';

interface Props {
  reportIds: string[];
  editActiveId: string;
  isCreating: boolean;
}

export default function ReportsList(props: Props) {
  /* TODO: need to add a check here:  if no reports show message
   * need text from Nafeesa
   * if (!props.reports || props.reports.length === 0) {
   *   return (<h1>No Reports</h1>);
   * }
   *
   */

  const reports = props.reportIds.map(
    reportId =>
      props.editActiveId === reportId ? (
        <EditReport reportId={reportId} key={reportId} />
      ) : (
        <ShowReport reportId={reportId} key={reportId} />
      ),
  );

  return (
    <Table className="reports-list">
      <thead className="reports-header">
        <tr>
          <FormattedMessage tagName="th" id="reports.timePeriod" />
          <FormattedMessage tagName="th" id="reports.reviewType" />
          <FormattedMessage tagName="th" id="reports.recipients" />
          <th>{/* empty th to allot for column of edit/delete button */}</th>
        </tr>
      </thead>
      <tbody>
        {/* Add extra EditReport for creating a new report */}
        {props.isCreating && <EditReport isCreate />}
        {reports}
      </tbody>
    </Table>
  );
}
