import React from 'react';
import { render, fireEvent, cleanup } from 'react-testing-library';
import { Paginator } from './Paginator';

function renderPaginatorScenario(clickHandlerSpy: any, totalPages: number = 400) {
  const page: number = 1;
  return render(<Paginator page={page} totalPages={totalPages} selectPage={clickHandlerSpy} />);
}

describe('<Paginator />', () => {
  afterEach(cleanup);
  describe('behaviour testing', () => {
    it('should render a paginator component', () => {
      const clickHandlerSpy = jest.fn();
      const { getByText, container } = renderPaginatorScenario(clickHandlerSpy);
      fireEvent.click(getByText('400'));
      expect(clickHandlerSpy).toHaveBeenCalledTimes(1);
      expect(container).toMatchSnapshot();
    });
    it("shouldn't render pagination component", () => {
      const clickHandlerSpy = jest.fn();
      const { container } = renderPaginatorScenario(clickHandlerSpy, 0);
      expect(container.firstChild).toBeNull();
    });
  });
});
