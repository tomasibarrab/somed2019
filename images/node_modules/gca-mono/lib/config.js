const fs = require('fs');

const packageExample = `{
  "mono": {
    "workspaces": [
      "apps"
    ],
    "prePublish": [
      "test",
      "build"
    ],
    "publish": [
      "deploy"
    ],
    "registryPostPublish": [
      "promote:prod"
    ]
  }
}`

function validatePackageJson(pkg) {
  try {
    const { mono: { workspaces, prePublish, publish } } = pkg;
  } catch (e) {
    console.log('Mono config is missing from package.json. It should look something like:');
    console.log(packageExample)
  }
}

function getMonoPackageConfig() {
  console.log(`${process.cwd()}/package.json`)
  const packageJson = require(`${process.cwd()}/package.json`);

  validatePackageJson(packageJson);

  return packageJson.mono;
}

module.exports = {
  getMonoPackageConfig,
};
