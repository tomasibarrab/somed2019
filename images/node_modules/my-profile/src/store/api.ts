import { Observable } from 'rxjs/Observable';
import { ajaxGetJSON, ajaxPut } from 'rxjs/observable/dom/AjaxObservable';
import './commonRxjs';
import { UserDTO } from './myProfile/myProfile';

const defaultAjaxOptions = { 'Content-Type': 'application/json' };

export function fetchCurrentContext() {
  return ajaxGetJSON('/setup/api/currentContext');
}

export function fetchUser(email: string, rid: number) {
  return ajaxGetJSON(`/admin/api/restaurant/${rid}/users/${encodeURIComponent(email)}`);
}

export function updateUser(user: UserDTO) {
  return ajaxPut(`/admin/api/restaurant/${user.rid}/users/${user.id}`, user, defaultAjaxOptions );
}
