import { mount } from 'enzyme';
import React from 'react';
import ImageDay from './ImageDay';

jest.mock('./DayCheckmark', () => () => 'DayCheckmark');

const renderComponent = (props: any) => mount(<ImageDay {...props} />);

describe('<ImageDay />', () => {
  const scenarios = [
    {
      description: 'when selected',
      props: { selected: true },
    },
    {
      description: 'when unselected',
      props: { selected: false },
    },
  ];

  scenarios.forEach(scenario =>
    test(`Matches snapshot ${scenario.description}`, () => {
      const props = Object.assign({}, { label: 'Label', onClickDay: jest.fn() }, scenario.props);
      expect(renderComponent(props).debug()).toMatchSnapshot();
    }),
  );

  test('it only shows the first three letters of the label', () => {
    const label = 'Monday';
    const props = Object.assign({}, { label, onClickDay: jest.fn(), selected: true });
    const wrapper = renderComponent(props);

    const text = wrapper.find('.day-label-text').text();

    expect(text).toEqual(label.substr(0, 3) + ' DayCheckmark'); // Including mock
  });
});
