import React from 'react';
import { IntlProvider } from 'react-intl';
import { Provider } from 'react-redux';
import { create } from 'react-test-renderer';
import configureMockStore from 'redux-mock-store';
import makeMockState from '../../../../store/flexiblepricing/makeMockState';
import { keys } from '../../../../translations/bundles/marketing.json';
import BillDetailContent from './BillDetailContent';

describe('<BillDetailContent />', () => {
  const scenarios = [
    {
      description: 'should match the snapshot',
      state: makeMockState(),
    },
    {
      description: 'restref w/ flat fee',
      state: makeMockState({ hasFlatFee: true }),
    },
  ];

  scenarios.forEach(({ description, state }) => {
    it(description, () => {
      const store = configureMockStore()(state);
      const component = create(
        <Provider store={store}>
          <IntlProvider locale="en-US" messages={keys}>
            <BillDetailContent />
          </IntlProvider>
        </Provider>,
      );
      const tree = component.toJSON();
      expect(tree).toMatchSnapshot();
    });
  });
});
