import { mount } from 'enzyme';
import { ModalWrapper } from 'gca-react-components';
import React from 'react';
import { IntlProvider } from 'react-intl';
import { create } from 'react-test-renderer';
import { keys } from '../../../../translations/bundles/marketing.json';
import findAndClick from '../../findAndClick';
import DiscoveryExplanationContent from './DiscoveryExplanationContent';

describe.skip('<DiscoveryExplanationContent />', () => {
  it('should match snapshot', () => {
    const component = create(
      <IntlProvider locale="en-US" messages={keys}>
        <DiscoveryExplanationContent {...{} as any} />
      </IntlProvider>,
    );
    const tree = component.toJSON();
    expect(tree).toMatchSnapshot();
  });

  it('should show/hide modal', () => {
    const wrapper = mount(
      <IntlProvider locale="en-US" messages={keys}>
        <DiscoveryExplanationContent {...{} as any} />
      </IntlProvider>,
    );

    findAndClick('btnHowSearchWorks', wrapper);

    expect(wrapper.find(ModalWrapper).length).toEqual(1);
    expect(wrapper.find(ModalWrapper)).toMatchSnapshot();

    wrapper
      .find('.gca-button .gca-modal-button .primary')
      .first()
      .simulate('click');

    expect(wrapper.find(ModalWrapper).length).toEqual(0);
  });
});
