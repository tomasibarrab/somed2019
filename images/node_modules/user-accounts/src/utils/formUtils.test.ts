import {
  allProps,
  computePristines,
  someProps,
} from './formUtils';

describe('form utils helpers', () => {

  it('computes pristine fields', () => {
    const originalValues = {
      email: 'some@email.com',
      firstName: 'first',
      lastName: 'last',
    };
    const updatedValues = {
      email: 'some_other@email.com',
      firstName: 'first',
      lastName: 'last name',
    };

    expect(computePristines(updatedValues, originalValues)).toEqual({ email: false, firstName: true, lastName: false });
  });

  it('ensures all properties are set or truthy', () => {
    const pristineValues = {
      email: true,
      firstName: true,
      lastName: true,
    };
    const nonPristineValues = {
      email: false,
      firstName: true,
      lastName: false,
      phone: true,
    };

    expect(allProps(pristineValues)).toEqual(true);
    expect(allProps(nonPristineValues)).toEqual(false);
    expect(allProps(nonPristineValues, ['firstName', 'phone'])).toEqual(true);
  });

  it('ensures at least one property is set or truthy', () => {
    const formEmptyFields = {
      email: undefined,
      firstName: undefined,
      lastName: undefined,
      phone: undefined,
    };
    const formFields = {
      email: 'some@email.com',
      firstName: 'Some',
      lastName: undefined,
      phone: undefined,
    };

    expect(someProps(formEmptyFields)).toEqual(false);
    expect(someProps(formFields)).toEqual(true);
    expect(someProps(formFields, ['firstName', 'lastName'])).toEqual(true);
    expect(someProps(formFields, ['lastName', 'phone'])).toEqual(false);
  });
});
