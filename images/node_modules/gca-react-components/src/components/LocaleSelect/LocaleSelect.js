import React from 'react';
import PropTypes from 'prop-types';
import classNames from 'classnames';
import Select from '../Select/Select';
import FlagIcon from '../../icons/FlagIcon';
import './LocaleSelect.scss';

function renderer(option) {
  const flag = <FlagIcon height="16" countryCode={option.code} />;

  return (
    <span>
      {flag} {option.label}
    </span>
  );
}

/**
 * Helper on top of `Select` to add flag icons. just add a `code` property to each option object.
 * All other options are passed through, so any options supported by `Select` (and react-select) are also supported here.
 * Supports all the same flags as the `FlagIcon` component, which current includes: `au`, `ca`, `de`, `gb`, `jp`, `mx`, `nl`, `us`
 */
export function LocaleSelect(props) {
  return (
    <Select
      optionRenderer={renderer}
      valueRenderer={renderer}
      {...props}
      className={classNames(props.className, 'gca-locale-select')}
    />
  );
}

LocaleSelect.propTypes = {
  /* eslint-disable react/no-unused-prop-types */
  options: PropTypes.arrayOf(
    PropTypes.shape({
      value: PropTypes.string,
      label: PropTypes.string,
      code: PropTypes.oneOf(['au', 'ca', 'de', 'es', 'fr', 'gb', 'it', 'jp', 'mx', 'nl', 'us']),
    }),
  ),
  className: PropTypes.string,
};

LocaleSelect.defaultProps = {};

export default LocaleSelect;
