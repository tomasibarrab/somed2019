/* eslint-disable max-len */

import React from 'react';
import PropTypes from 'prop-types';

// Each star on the page needs to correctly match its polygon to its linearGradient
// Because we need to link them by id, this counter gives us a way to generate a
// unique id for each star.
let counter = 0;

export default function Star(props) {
  const fill = props.filled > 0 ? props.filled.toFixed(2) : 0.01;
  const id = counter;

  counter += 1;

  return (
    <svg width={props.width} height={props.height} viewBox="0 0 26 25" version="1.1" xmlns="http://www.w3.org/2000/svg">
      <defs>
        <linearGradient id={`rating-star-gradient-${id}`} x1={fill} y1="0" x2="0" y2="0">
          <stop stopColor={props.color} stopOpacity="0" />
          <stop stopColor={props.color} stopOpacity="1" />
        </linearGradient>
      </defs>

      <polygon
        stroke={props.color}
        strokeWidth="1.5"
        fill={`url(#rating-star-gradient-${id})`}
        points="16.9568761 8.22580645 25.8947368 9.53629032 19.4210526 15.9475806 20.9455008 25 12.9473684 20.7258065 4.94923599 25 6.47368421 15.9475806 0 9.53629032 8.93786078 8.22580645 12.9473684 0"
      />
    </svg>
  );
}

Star.propTypes = {
  height: PropTypes.string,
  width: PropTypes.string,
  color: PropTypes.string,
  filled: PropTypes.number,
};
