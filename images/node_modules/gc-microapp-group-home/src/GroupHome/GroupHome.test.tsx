import { shallow } from 'enzyme';
import { shallowWithIntl } from 'gca-jest-config';
import React from 'react';

import { initialState, PureGroupHome as GroupHome } from './GroupHome';

describe('<GroupHome />', () => {
  const baseApps =  initialState.applications;

  it('should display loading panel', () => {
    const wrapper =
      shallowWithIntl(<GroupHome/>)
      .setState({isLoading: true});
    expect(wrapper).toMatchSnapshot();
  });

  it('should display error panel', () => {
    const wrapper = () => {
      return shallowWithIntl(<GroupHome/>)
      .setState({isError: true});
    }
    expect(wrapper).toThrow();
  });

  it('should display Group Home with all apps enabled', () => {
    const overrideApps = {
      GroupAccounts: {
        enabled: true,
        url: '/group/123/accounts',
      },
      GroupBookings: {
        enabled: true,
        url: '/group/123/central',
      },
      GroupReporting: {
        enabled: true,
        url: '/group/123/reporting',
      },
    }
    const wrapper =
      shallowWithIntl(<GroupHome/>)
      .setState({
        applications: {...baseApps, ...overrideApps},
        isLoading: false,
      });
    expect(wrapper).toMatchSnapshot();
  });

  it('should display Group Home with no apps enabled', () => {
    const wrapper =
      shallowWithIntl(<GroupHome/>)
      .setState({
        applications: {...baseApps},
        isLoading: false,
      });
    expect(wrapper).toMatchSnapshot();
  });
});
