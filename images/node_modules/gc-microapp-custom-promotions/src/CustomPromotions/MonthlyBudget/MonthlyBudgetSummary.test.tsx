import { mount } from 'enzyme';
import React from 'react';
import { IntlProvider } from 'react-intl';
import messages from '../../i18n/custom-promotions';
import { MonthlyBudgetSummary } from './MonthlyBudgetSummary';

const renderComponent = (props: any) =>
  mount(
    <IntlProvider messages={messages} locale="en-US">
      <MonthlyBudgetSummary {...props} />
    </IntlProvider>,
  );

jest.mock('./helpers', () => ({
  getRestaurantTotalCost: (cap: number) => `mockTotalCostForBudgetOf${cap}`,
}));

describe('<MonthlyBudgetSummary />', () => {
  /* tslint:disable:object-literal-sort-keys */
  const scenarios = [
    {
      description: 'shows budget disabled string',
      disabled: true,
    },
    {
      description: 'shows one string for budget enabled w/o credits',
      disabled: false,
      cap: 500,
      credits: {
        currencySymbol: '$',
      },
    },
    {
      description: 'shows two strings for budget enabled w/ credits',
      disabled: false,
      cap: 500,
      credits: {
        shouldShowCredits: true,
        currencySymbol: '$',
      },
    },
  ];

  scenarios.forEach(({ description, ...props }) => {
    it(description, () => {
      const wrapper = renderComponent(props);

      expect(wrapper.debug()).toMatchSnapshot();
    });
  });
});
