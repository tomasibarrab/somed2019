import { Modal, ModalHeader, ModalMain } from 'gca-react-components';
import * as React from 'react';

import './CodeBlock.scss';

interface Props {
  data: any;
}

interface State {
  open: boolean;
}

export default class CodeBlock extends React.Component<Props, State> {
  constructor(props: Props) {
    super(props);
    this.state = {
      open: false,
    };
  }

  public render() {
    return (
      <div className="code-block">
        <button className="code-block-button" onClick={this.handleClick}>
          view raw JSON
        </button>
        {this.state.open ? (
          <Modal onClose={this.handleClose}>
            <ModalHeader onClose={this.handleClose} title="Raw JSON payloads" />
            <ModalMain className="code-block-modal">
              <pre>
                <code>{JSON.stringify(this.props.data, null, 2)}</code>
              </pre>
            </ModalMain>
          </Modal>
        ) : null}
      </div>
    );
  }

  private handleClick = () => {
    this.setState({ open: true });
  };

  private handleClose = () => {
    this.setState({ open: false });
  };
}
