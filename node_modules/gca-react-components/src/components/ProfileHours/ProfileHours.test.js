import { shallow } from 'enzyme';
import React from 'react';

import ProfileHours from './ProfileHours';

const standardShifts = [
  { id: 'brunch', label: 'Brunch' },
  { id: 'lunch', label: 'Lunch' },
  { id: 'breakfast', label: 'Breakfast' },
  { id: 'dinner', label: 'Dinner' },
  { id: 'openingtimes', label: 'Opening Times' },
];

const labels = {
  timeRangeTo: 'to',
  addShift: 'Add a shift',
  removeShift: 'remove',
  selectShiftName: 'Select a Shift',
  shiftEnds: 'End',
  shiftStarts: 'Start',
  lastSeating: 'Last Seating',
  invalidName: 'Add a name',
  invalidTimeRange: 'Invalid time range',
  invalidDays: 'Select at least one day',
};

const shifts = [
  {
    standardShiftName: { id: 'brunch' },
    shiftStarts: '05:00:00',
    shiftEnds: '10:00:00',
    days: ['mon', 'tue'],
  },
  {
    standardShiftName: { id: 'lunch' },
    shiftStarts: '05:00:00',
    shiftEnds: '10:00:00',
    days: ['mon', 'tue', 'wed'],
  },
];

describe('ProfileHours', () => {
  const props = {
    shifts,
    labels,
    standardShifts,
    valid: true,
    onChange: jest.fn(),
  };

  it('should render a basic list of shifts', () => {
    expect(shallow(<ProfileHours {...props} />)).toMatchSnapshot();
  });

  it('should render error messages and disabled "add shift" button when not valid', () => {
    expect(shallow(<ProfileHours {...props} valid={false} />)).toMatchSnapshot();
  });

  it('should not render "remove" button when only a single shift is present', () => {
    expect(shallow(<ProfileHours {...props} shifts={shifts.slice(0, 1)} />)).toMatchSnapshot();
  });

  it('should render as disabled when disabled', () => {
    expect(shallow(<ProfileHours {...props} disabled />)).toMatchSnapshot();
  });
});
