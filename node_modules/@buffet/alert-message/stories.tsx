import React from 'react';
import { withReadme } from 'storybook-readme';
import { storiesOf } from '@storybook/react';
import { styled } from '@storybook/theming';
import { withKnobs, select, boolean, text } from '@storybook/addon-knobs';

import { AlertMessage } from './src/index';
import README from './README.md';

const ComponentContainer = styled.div`
  background: rgba(120, 120, 120, 0.5);
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 20px;
  min-height: 100vh;
`;

function handleClose(id: string) {
  alert(`Closing AlertMessage id:${id}`);
}

const options: { [key: string]: 'success' | 'error' } = {
  Success: 'success',
  Error: 'error'
};
const defOption = 'success';

const buffet = {
  componentName: '@buffet/alert-message'
};

storiesOf('AlertMessage', module)
  .addDecorator(withKnobs)
  .addDecorator(withReadme(README))
  .add('AlertMessage', () => {
    const typeValue = select('type', options, defOption) as ('success' | 'error');
    const hasOnClose = boolean('OnClose', true);
    const msgValue = text('message', 'This is a message. Change it using the knobs.');

    return (
      <AlertMessage
        id="success-noclose"
        iconId="success"
        type={typeValue}
        message={msgValue}
        onClose={hasOnClose ? handleClose : undefined}
      />
    );
    },
    { buffet }
  );
