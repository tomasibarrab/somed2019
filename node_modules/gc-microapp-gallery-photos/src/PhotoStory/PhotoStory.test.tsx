import { cleanup, render } from '@testing-library/react';
import React from 'react';

import { IntlProvider } from 'react-intl';

import { mockPhotos } from '../common/testHelpers';
import { keys } from '../translations/bundles/gallery-photos.json';
import PhotoStory from './PhotoStory';

describe('<PhotoStory', () => {
  const mockSetDeletePid = jest.fn();
  const PhotoStoryProps = {
    photo: mockPhotos[0],
    setDeletePid: mockSetDeletePid,
  };
  afterEach(cleanup);

  const scenarios = [
    {
      description: 'does not render an image',
      photo: null,
    },
    {
      description: 'renders an image',
      photo: mockPhotos[0],
    },
  ];

  scenarios.forEach(({ description, photo }) => {
    it(description, () => {
      const component = (
        <IntlProvider locale="en-US" messages={keys}>
          <PhotoStory {...Object.assign({}, PhotoStoryProps, { photo })} />
        </IntlProvider>
      );
      const { baseElement } = render(component);
      expect(baseElement).toMatchSnapshot();
    });
  });
});
