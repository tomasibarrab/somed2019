import { createMixpanelMiddleware, mixpanel } from 'gca-react-components';

import { addReport, deleteReport, fetchReports, updateReport } from '../store/reports/reports';
import { fetchReviewSummary } from '../store/reviewSummary/reviewSummary';

const REPORTS = 'Reports';
const trackedActions = {
  [fetchReviewSummary.started.type]: mixpanel.createLoadPageEvent({ feature: 'Summary & All Reviews' }),
  [fetchReports.started.type]: mixpanel.createLoadPageEvent({ feature: REPORTS }),
  [addReport.started.type]: mixpanel.createPublishEvent({ feature: REPORTS, action: mixpanel.actionNames.CREATE }),
  [updateReport.started.type]: mixpanel.createPublishEvent({ feature: REPORTS, action: mixpanel.actionNames.UPDATE }),
  [deleteReport.started.type]: mixpanel.createPublishEvent({ feature: REPORTS, action: mixpanel.actionNames.DELETE }),
};

export default createMixpanelMiddleware({
  defaultProps: {
    app: 'Reviews',
  },
  trackedActions,
});
