import { BarChart } from 'gca-react-components';
import map from 'lodash/map';
import React from 'react';
import { InjectedIntlProps, injectIntl } from 'react-intl';

import './Distribution.scss';

import { RatingsDistribution } from '../../../store/reviewSummary/reviewSummary';

interface BaseProps {
  ratingsDistribution: RatingsDistribution;
}
interface Props extends BaseProps, InjectedIntlProps {}

function Distribution(props: Props) {
  const ratingsDistribution = [5, 4, 3, 2, 1].map(key => ({
    formattedValue: props.intl.formatNumber(props.ratingsDistribution[key]),
    key: `${key}`,
    value: props.ratingsDistribution[key],
  }));

  return (
    <section className="summary-distribution">
      <BarChart data={ratingsDistribution} />
    </section>
  );
}

export default injectIntl<BaseProps>(Distribution);
