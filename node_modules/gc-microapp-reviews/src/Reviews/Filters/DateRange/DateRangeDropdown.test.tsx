import { shallow } from 'enzyme';
import { shallowWithIntl } from 'gca-jest-config';
import React from 'react';

import { PureDateRangeDropdown } from './DateRangeDropdown';

describe('<PureDateRangeDropdown />', () => {
  let props;

  beforeEach(() => {
    // Set times to midnight with a 12 hour offset from UTC so that snapshots don't fail in CI.
    props = {
      current: {
        end: '2017-03-17T00:00:00.000-12:00',
        start: '2017-03-17T00:00:00.000-12:00',
      },
      focused: true,

      // functions
      cancel: jest.fn(),
      focus: jest.fn(),
    };
  });

  it('Default snapshot', () => {
    const wrapper = shallowWithIntl(<PureDateRangeDropdown {...props} />);

    expect(wrapper).toMatchSnapshot();
  });

  it('Should display as closed if useCustomDate is not focused', () => {
    props.focused = false;
    const wrapper = shallowWithIntl(<PureDateRangeDropdown {...props} />);

    expect(wrapper.props().open).toEqual(false);
  });

  it('Should display as open if useCustomDate is focused', () => {
    const wrapper = shallowWithIntl(<PureDateRangeDropdown {...props} />);

    expect(wrapper.props().open).toEqual(true);
  });
});
