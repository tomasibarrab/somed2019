/* Stolen from gc-monorepo-admin/apps/custom-promotions where it was
  Stolen from gca-react-components/src/components/ProfileHours/utils.js
  since we did not want to grab a deeply exported function that might change
  out from under us.
*/

import { Days } from '../../store/flexiblepricing/flexiblepricing.types';

// known days in epoch ms at 00:00:00 UTC
const MON = 1483315200000;
const TUE = 1483401600000;
const WED = 1483488000000;
const THU = 1483574400000;
const FRI = 1483660800000;
const SAT = 1483747200000;
const SUN = 1483228800000;

const rawDayOptions = [
  { value: SUN, id: Days.Sunday },
  { value: MON, id: Days.Monday },
  { value: TUE, id: Days.Tuesday },
  { value: WED, id: Days.Wednesday },
  { value: THU, id: Days.Thursday },
  { value: FRI, id: Days.Friday },
  { value: SAT, id: Days.Saturday },
];

const formatDay = (locale: string = 'en-us', ms: number) =>
  new Intl.DateTimeFormat(locale, { weekday: 'short', timeZone: 'UTC' }).format(ms);

const getDayOptions = (locale?: string) =>
  rawDayOptions.reduce((accumulator, { id, value }) => ({ ...accumulator, [id]: formatDay(locale, value) }), {});

export default getDayOptions;
