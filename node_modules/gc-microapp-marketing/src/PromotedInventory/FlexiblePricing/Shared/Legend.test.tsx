import Legend, { LegendType } from './Legend';

import React from 'react';
import { IntlProvider } from 'react-intl';
import { create } from 'react-test-renderer';
import { keys } from '../../../translations/bundles/marketing.json';

const renderComponent = props =>
  create(
    <IntlProvider messages={keys} locale="en-US">
      <Legend {...props} />
    </IntlProvider>,
  );

describe('Legend', () => {
  it('shows [updating] for missing prices', () => {
    const component = renderComponent({
      inUseDiscoveryRange: {
        maxPrice: null,
        minPrice: null,
      },
      prices: {},
      type: LegendType.Summary,
    });

    expect(component.toJSON()).toMatchSnapshot();
  });

  it('shows Discovery Bookings label when there is a range of prices for discovery', () => {
    const component = renderComponent({
      inUseDiscoveryRange: {
        maxPrice: 3,
        minPrice: 1.5,
      },
      prices: {
        currencyCode: 'USD',
        otreso: 0.25,
        systemFee: 249,
      },
    });

    expect(component.toJSON()).toMatchSnapshot();
  });
});
