const packageInfo = require('../lib/get-publish-info');
const runInAll = require('../lib/run-in-all');

module.exports = {
  command: 'run <command>',
  describe: '',
  builder(yargsInstance) {
    return yargsInstance.positional('command', {
      describe: 'Yarn command to run',
      type: 'string',
    }).boolean('dry');
  },
  handler(argv) {
    const packages = packageInfo(argv);
    const command = argv.command

    runInAll({
      packages,
      command,
    });
  }
}