import { useEffect, useState } from 'react';
import checkRestaurantToggles, { CheckType } from 'shared-utils/checkRestaurantToggles';

// re-export the CheckType enum
export { CheckType };

export function useRestaurantToggles(
  rid: number,
  features: string | string[],
  check: CheckType = CheckType.any,
): null | boolean {
  const [ checkToggles, setCheckToggles ] = useState<null | boolean>(null);

  useEffect(() => {
    checkRestaurantToggles(rid, features, check)
      .then(setCheckToggles)
      .catch(() => { /* log the error somewhere? */ });
  }, [rid, check, ...features]);

  return checkToggles;
}

export default useRestaurantToggles;
