import React from 'react';
import { injectIntl } from 'react-intl';

import { FieldArray } from 'react-final-form-arrays';
import { RoleDefinitions } from '../ManageRoles/RoleDefinitions';
import userFormRolesRenderer from './UserFormRoles';

export default injectIntl(({
  scopeType,
  isAllAccessSet,
  values,
  intl,
  filterFields = false,
  forceDisabled = false,
}: any) => (
  <>
    <h2>{intl.formatMessage({ id: `user.header.access.${scopeType}` })}</h2>
    <p>
      {intl.formatMessage({
        id: scopeType === 'group'
          ? 'user.group.access.info'
          : 'user.rid.access.info',
      })
      }
    </p>
    <RoleDefinitions type={scopeType} />
    <div id={`user-access-roles-${scopeType}`} className="user-access-roles">
      <div className="access-header">
        <div className="type">{intl.formatMessage({ id: 'user.header.access' })}</div>
        <div className="features">{intl.formatMessage({ id: 'user.header.features' })}</div>
      </div>
      <ul>
        <FieldArray name="rolesSet">
          {userFormRolesRenderer({
            disabled: isAllAccessSet,
            filterFields,
            forceDisabled,
            intl,
            scopeType,
            values,
          })}
        </FieldArray>
      </ul>
    </div>
  </>
));
