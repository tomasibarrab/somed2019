# User Accounts

## Introduction

This micro-app is capable of working under multiple contexts: Restaurant or Group.

The UI adapts depending on the context and allows to manage user accounts and access types (roles) for both Restaurants and Groups.

## Run the App

First run `gc-microsite-group-setting` on your machine, and then run the microapp:

```
yarn start
```

To serve the app for either a Group or a Restaurant, go to:

- for Group: `http://localhost:3000/group-settings/user-accounts/<groupid>/directory`.
- for Restaurant: `http://localhost:3000/admin/user-accounts/<groupid>/directory`.

(To see which path corresponds to which context, see the `app.config.js` file and look for the `gcScopePatterns` property)

The app will call the appropriate APIs on the `group-settings` microsite, while the `dev-server` will proxy all other calls to pre-prod.

## Production set-up

While in dev, the app works for both contexts, depending on the url you use (defined in the `app.config.js`). This is set by the local dev server.

In PP and PROD however, the context is set by the appropriate microsite in the HTML template. Thus, the app is served by different microsites for each context:
- for Groups, the app is served by the `gc-microsite-group-settings`
- for Restaurants, the app is served by the `gc-microsite-profile`

So each new release to the UAC app must be pushed to both microsites.

## Localhost Troubleshooting

- After running the app locally, before using it, make sure you are logged by visiting `http://localhost:3000/login`
- Check that you have a valid and active `TestToken` set in the microsite

## Run unit tests

To run all local unit tests:

```
yarn test
```

To update the test snapshots

```
yarn test --u
```

To run one single test file:

```
yarn test src/store/redux-modules/users.test.ts
```
