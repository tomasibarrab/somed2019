import React, { SFC } from 'react';
import { FormattedMessage } from 'react-intl';
import { formValues } from 'redux-form';
import { CreditsModel } from '../../store/customPromotions/customPromotions.types';
import { getRestaurantTotalCost } from './helpers';

interface Props {
  disabled: boolean;
  cap: number;
  credits: CreditsModel;
}

export const MonthlyBudgetSummary: SFC<Props> = ({ credits, disabled, cap }) =>
  disabled ? (
    <FormattedMessage id="guestcampaigns.custom_promotions.form.no_budget_cap" tagName="span" />
  ) : (
    <>
      <FormattedMessage
        id="guestcampaigns.custom_promotions.form.budget_cap"
        tagName="span"
        values={{ budgetCap: cap, currencySymbol: credits.currencySymbol }}
      />
      {credits.shouldShowCredits && (
        <FormattedMessage
          id="guestcampaigns.custom_promotions.form.budget_cap.after_credits"
          tagName="span"
          values={{ totalCost: getRestaurantTotalCost(cap, credits), currencySymbol: credits.currencySymbol }}
        />
      )}
    </>
  );

export default formValues<any, any>('cap', 'disabled')(MonthlyBudgetSummary);
