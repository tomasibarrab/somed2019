# checkGlobalToggle

A Promise wrapper that checks a Global Feature Toggle.

Just pass the global feature toggle name, omitting the "global" part, which the function will add automatically. 

## Basic use

Just fetch the value of the global feature toggle, then do something with it.

```tsx
import checkGlobalToggle from 'shared-utils/checkGlobalToggle';

checkGlobalToggle('someToggle')
  .then((isOn: boolean) => {
    // do your thing with "globalSomeToggle"
  });
```

## Usage in an epic

Sometimes you want to fetch a global feature toggle inside an epic, then use the value of that toggle further down.

```tsx
const someEpic: Epic = action$ =>
  action$.ofTye(someAction.type)
    .map((action: Action<any>) => ({
      payload: action.payload,
      other: 'static prop',
    }))
    .mergeMap(mergeWithGlobalToggle('someToggle'))
    .mergeMap(({ payload, other, someToggle }) => {
      // do your thing with all of them...
    })
    .cach((error) => {
      // do something in case of an error...
    }); 

```

Notice the function `mergeWithGlobalToggle`, which takes as parameter the name of the global feature toggle to check.
The function will then convert this string into an actual prop that will be merged with the object from the previous `.map()` call.

## Definitions

The base function has the following type signature:

```ts
function checkGlobalToggle(feature: string): Promise<boolean>
```

The epic helper function has the following signature:

```ts
type MergeWithGlobalToggle = <F extends string>(feature: F) =>
    <T extends {}>(obj: T) => Promise<T & { [key in F]: boolean }>
```
