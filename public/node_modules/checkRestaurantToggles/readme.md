# checkRestaurantToggles

A Promise wrapper that checks a set of Restaurant Feature Toggles.

You can pass either a single, or a list of feature toggle names.

You can check for either `ALL`, or `ANY` requested features.

## Basic use

### Single Feature Toggle

Just check the feature toggle, then do something with the result:

```ts
import checkRestaurantToggles from 'shared-utils/checkRestaurantToggles';

checkRestaurantToggles(123, 'transientSomeToggle')
  .then((isOn: boolean) => {
    // do your thing with "transientSomeToggle"
  });
```

### Multiple Feature Toggles

By default, the hook will check for ANY feature toggle from a list:

```ts
checkRestaurantToggles(
  123,
  ['transientSomeToggle', 'featureAnotherToggle']
)
  .then((anyIsOn: boolean) => {
    // do your thing if ANY of them is ON
  });
```

You can also check for ALL Feature Toggles in the list:

```ts
import checkRestaurantToggles, { CheckType } from 'shared-utils/checkRestaurantToggles';

checkRestaurantToggles(
  123,
  ['transientSomeToggle', 'featureAnotherToggle'],
  CheckType.all
)
  .then((allAreOn: boolean) => {
    // do your thing if ALL of them are ON
  });
```

## Request resource sharing and Caching

Checking for multiple feature toggles will NOT make multiple requests.

Instead, the helper function will share the request resource, and it will resolve for all once the request completes.

So, immediately calling the function multiple times will NOT make subsequent requests:

```ts
checkRestaurantToggles(123, 'firstToggle')
  .then((isOn: boolean) => {
    // do your thing with "firstToggle"
  });

checkRestaurantToggles(123, 'secondToggle')
  .then((isOn: boolean) => {
    // do your thing with "secondToggle"
  });

checkRestaurantToggles(123, 'thirdToggle')
  .then((isOn: boolean) => {
    // do your thing with "thirdToggle"
  });
```

All above promises will use the same shared request, and they will resolve at the same time, but independently from each-other.


The result from the original response is cached, so calling the function some time later will resolve immediately from the cached response:

```ts
checkRestaurantToggles(123, 'anotherToggle')
  .then((isOn: boolean) => {
    // resolves immediatle from cache
  });
```
