import { Button } from '@buffet/button';
import { Icon } from '@buffet/icon';
import moment from 'moment';
import React, { useCallback } from 'react';
import { FormattedMessage, InjectedIntlProps, injectIntl } from 'react-intl';

import { AgreementNewDetails } from '../types';

import './Header.scss';


interface HeaderProps {
  agreement: AgreementNewDetails;
}

const Header = ({ agreement, intl }: HeaderProps & InjectedIntlProps) => {
  const handlePrint = useCallback(() => {
    window.print();
  }, []);

  return (
    <header className="agreement-header">
      <div />
      <div className="header-title-section">
        <h1 id="agreement-title">{agreement.termsAndConditions[0].title}</h1>
        <div id="agreement-status" className="date-updated">
          <FormattedMessage
            id="agreement.status.withDate"
            values={{
              date: intl.formatDate(moment(agreement.lastUpdatedDataUTC).toDate(), { format: 'l' }),
              status: intl.formatMessage({ id: `agreement.status.${agreement.state}` }),
            }}
          />
        </div>
      </div>
      <div className="header-print-section">
        <Button type="button" onClick={handlePrint} theme="link">
          <Icon iconId="print" className="section-icon" />
          Print
        </Button>
      </div>
    </header>
  );
};

export default injectIntl(Header);
