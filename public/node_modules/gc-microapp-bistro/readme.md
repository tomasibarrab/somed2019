# Bistro: the GuestCenter System Admin App

Welcome to Bistro!

This app is for Internal Users only and it offers many features for managing GuestCenter
users, restaurants, groups and more.

The app is a work in progress. It has been designed to grow and support many more features
(If you work on this app and add new feature, please add some notes here, in this readme file).

You can access the app through guestcenter in Production or Pre-Prod using this  path:

    /admin/bistro

## Build, run and deploy

The Bistro app is served by `gc-microsite-profile`. It is deployed automatically when
you merge a PR into master with a `package.json` with a higher version number.

To build:

    yarn build

To start locally in dev mode:

    yarn start

Note: this requires you run on your system the `gc-microsite-profile`.

The app will be active on `localhost:3000`. The local dev-server (from monorepo) will
redirect all the calls to the microsite on `localhost:9000` or to gateway on pre-prod.

To run the unit tests:

    yarn test

To run end-to-end Cypress tests:

    yarn cy:run

## Bistro Sections

The Bistro app is structured in 4 main top sections:

1. Restaurants
2. Groups
3. Users
4. Permissions (not yet implemented)

The first three sections feature a simple search as a entry point for accessing the various features.

The App is served by `gc-microsite-profile` and is implemented as a Single Page Application (SPA).

It uses dynamic imports and React Lazy to load each section upon first access.

The UI is based on Buffet components and all the style definition use OTKit tokens.

There is no Redux in this app, but there is extensive use of React Hooks to manage state and
make ajax calls to the back-end.

### Search

The three main sections of Bistro are based on top level search feature.

For restaurant and groups the search is powered by Elastic Search in the back-end.
The performance are very good and the results are correctly ranked.

The search for users is based on a simple SQL query, so it is slower and there is no
ranking order in the results.


### Restaurants

Once you search for a restaurant (by RID, Name, location, etc...) you will be presented with a list of
results, each one with the following options:

* *Diagnostics*

  Shows an informational card for all internal systems (RIDE, SFDC, etc.)

  **Danger!**  Don’t use ‘Make RID Operational’ unless you really know what your doing.  Could cause loss of production data.

* **Everclear**

  Delete guests / reservations for a RID

  Again, very dangerous! Access is restricted so you can’t bumble your way into trouble.

* *User Agreements*

  Show all User Agreements and status

At the top of the page a button to `Add Test Restaurant` is also shown (Not currently functional).

### Groups

* Permissions

  Show available group permissions

* Membership

  Links out to GCA group membership app

* Management

  Links out to GCA group management app

### Users

The search here allows you to select Internal or External users or both.

For each External users you can:

  - Show User profile, Reset password and Disable the user,

For Internal users you can:

  - Internal, Reset password, Disable the user.

In the the page you can Add New Internal user.


