/**
 * This component is the skeleton around the actual pages, and should only
 * contain code that should be seen on all pages. (e.g. navigation bar)
 */

import { Layout } from 'gca-react-components';
import * as React from 'react';
import { Redirect, Route, Switch } from 'react-router-dom';

import strings from '../../strings';
import MainNav from '../MainNav/MainNav';

import './App.scss';

const GroupsDashboard = React.lazy(() =>
  import(/* webpackChunkName: "GroupsDashboard" */ '../../Groups/GroupsDashboard'));
const RestaurantsDashboard = React.lazy(() =>
  import(/* webpackChunkName: "RestaurantsDashboard" */ '../../Restaurants/RestaurantsDashboard'));
const UsersDashboard = React.lazy(() =>
  import(/* webpackChunkName: "UsersDashboard" */ '../../Users/UsersDashboard'));
const PermissionsDashboard = React.lazy( () =>
  import(/* webpackChunkName: "PermissionsDashboard" */ '../../Permissions/PermissionsDashboard'));
const PartnershipsDashboard = React.lazy( () =>
  import(/* webpackChunkName: "PartnershipsDashboard" */ '../../Partnerships/PartnershipsDashboard'));

export const enum Routes {
  Groups = '/groups',
  GidPermissions = '/groups/:gid/permissions',
  Users = '/users',
  Permissions = '/permissions',
  UserNew = '/users/new',
  UserProfile = '/users/:userurn/profile',
  Restaurants = '/restaurants',
  RidDiagnostic = '/restaurants/:rid/diagnostics',
  RidPermissions = '/restaurants/:rid/permissions',
  RidAgreements = '/restaurants/:rid/agreements',
  Partnerships = '/partnerships',
  RidEverclear = '/restaurants/:rid/everclear',
}

export default function App() {

  return (
    <Layout title={strings['app.title']}>
      <MainNav />
      <React.Suspense fallback={<div>Loading...</div>}>
        <Switch>
          <Route path={Routes.Restaurants} component={RestaurantsDashboard} />
          <Route path={Routes.Groups} component={GroupsDashboard} />
          <Route path={Routes.Users} component={UsersDashboard} />
          <Route path={Routes.Permissions} component={PermissionsDashboard} />
          <Route path={Routes.Partnerships} component={PartnershipsDashboard} />
          <Redirect to={Routes.Restaurants} />
        </Switch>
      </React.Suspense>
    </Layout>
  );
}
