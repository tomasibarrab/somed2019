import React from 'react';
import styles from './AlertMessage.css';
import classNames from 'classnames/bind';
import { Icon, Touchable } from '@buffet/icon';

const cx = classNames.bind(styles);

export interface AlertMessageProps {
  id: string;
  iconId: string;
  message: string;
  type: 'success' | 'error';
  onClose?: (id: string) => void;
}

export const AlertMessage = ({ iconId, message, type, onClose, id }: AlertMessageProps) => (
  <div className={cx('alert', `alert--${type}`)} id={id} data-testid={id}>
    <div className={cx('alert__content')}>
      <Icon className={cx('alert__icon', `alert__icon--${type}`)} iconId={iconId} />
      <div className={cx('alert__message')}>{message}</div>
    </div>
    {onClose ? (
      <Touchable
        onClick={() => onClose(id)}
        iconClassName={cx('alert__close')}
        data-testid={`${id}-close-bt`}
        iconId="cross"
      />
    ) : null}
  </div>
);
