import React from 'react';
import { TransitionableFooter } from './TransitionableFooter';
import { render } from 'react-testing-library';

describe('TransitionableFooter', () => {
  const setup = (show: boolean) => {
    const renderResult = render(<TransitionableFooter show={show} />);

    return renderResult;
  };

  beforeAll(() => {
    jest.useFakeTimers();
  });

  it('should not render footer if show is false', () => {
    const renderResult = setup(false);
    const { queryByTestId } = renderResult;
    jest.runAllTimers();

    expect(queryByTestId('footer')).toBeFalsy();
  });

  it('should render footer if show is true', () => {
    const renderResult = setup(true);
    const { getByTestId } = renderResult;
    jest.runAllTimers();

    expect(getByTestId('footer')).toBeTruthy();
  });

  it('should render footer after show is true', () => {
    const renderResult = setup(false);
    const { queryByTestId, container } = renderResult;
    jest.runAllTimers();

    expect(queryByTestId('footer')).toBeFalsy();

    render(<TransitionableFooter show={true} />, { container });
    jest.runAllTimers();

    expect(queryByTestId('footer')).toBeTruthy();
  });
});
