import { CheckboxItem } from '../types/index';

export const getFilteredOptions = (
  options: Array<CheckboxItem>,
  query: string,
  filter: (option: CheckboxItem, query: string) => boolean
) => {
  const filteredOptions: Array<CheckboxItem> = options.map(option => {
    if (option.options !== undefined) {
      return {
        ...option,
        options: getFilteredOptions(option.options, query, filter)
      };
    }
    return option;
  });

  return filteredOptions.filter(option => {
    if (option.options !== undefined && option.options.length !== 0) return true;
    return filter(option, query);
  });
};

export const defaultSubstringFilter = (option: CheckboxItem, query: string): boolean => {
  if (option.options) {
    return false;
  }
  return option.label.toLocaleLowerCase().indexOf(query.toLocaleLowerCase()) !== -1;
};
