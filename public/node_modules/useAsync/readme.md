# useAsync React hook

This hook provides a stateful wrapper for making asynchronous calls inside a functional React component.

## Basic use

The hook accept as argument any function that return a Promise and return a couple with the
first value being an object that allow you to monitor the status of the request and the second
value being a wrapper for the actual request to be used inside your function.

```tsx
function myAsyncFunction(t: number): Promise<number> {
  return new Promise<number>( (resolve, reject) => {
    setTimeout( () => resolve(t), t*1000);
  })
}

function MyComponent() {
  const [ elapsedTime, setElapsedTime ] = React.useState(0);
  const [ myAsyncStatus, myAsyncCall ] = useAsync(myAsyncFunction);

  function handleClick() {
    myAsyncCall(4)
    .then(setElapsedTime)
  }

  return (
    <div>
      <h2>{elapsedTime} seconds</h2>
      <p><button onClick={handleClick}>Click for Async</button>
    </div>
  );
}
```

## Definitions

The hook has the following type signature:

```ts
function useAsync<P extends AnyPar, T>(asyncCall: AsyncCall<P, T>): AsyncHooks<AsyncCall<P, T>>
```

The function you pass as a parameter to the hook is of type `AsyncCall<P, T>` where `P` is the type of the
parameters (an array or parameters: eg. `[ string, number ]`) and `T` is the type of the returned value of the Promise
for the asynchronous call.

The hook return an `AsyncHook` type defined as

```ts
type AsyncHook<F> = [ Readonly<AsyncStatus>, F ];
```

This module exports the `AsyncStatus` as well:

```ts
export const enum AsyncProgress {
  None = 'None',
  Started = 'Started',
  Done = 'Done',
  Failed = 'Failed',
}

export interface AsyncStatus {
  status: AsyncProgress;
  error?: Error;
}
```


