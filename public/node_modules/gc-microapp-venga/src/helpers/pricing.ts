import { LangLocale } from 'gca-react-components/src/redux-modules/languageProvider';
import { Pricing } from '../store/types';

export const formatProductPrice = (productPricing: Pricing | undefined, locale: LangLocale) => {
  if (!productPricing) {
    return '';
  }

  const formattedPrice = productPricing.listPrice.toLocaleString(
    locale,
    {
      currency: productPricing.currencyCode,
      currencyDisplay: 'symbol',
      maximumFractionDigits: 0,
      minimumFractionDigits: 0,
      style: 'currency',
    },
  );

  // IE & Edge don't honor minimumFractionDigits and maximumFractionDigits
  // open bug ticket: https://developer.microsoft.com/en-us/microsoft-edge/platform/issues/20537187/
  if (formattedPrice.indexOf('.00') > -1) {
    return formattedPrice.replace('.00', '');
  }

  return formattedPrice;
};
