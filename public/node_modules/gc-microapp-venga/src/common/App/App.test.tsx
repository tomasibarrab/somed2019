import { shallowWithIntl } from 'gca-jest-config';
import * as React from 'react';

import { PureApp as App } from './App';

describe('<App />', () => {
  const props = {
    error: false,
    fetchIsActive: jest.fn(),
    fetchIsSignedUp: jest.fn(),
    fetchProductsPrices: jest.fn(),
    initializeGcScope: jest.fn(),
    isAppError: false,
    isAppLoading: false,
    isVengaCompliant: false,
    location: { pathname: '/' },
  };

  it('should render App Loader', () => {
    const wrapper = shallowWithIntl(<App {...props} isAppLoading={true} />);
    expect(wrapper).toMatchSnapshot();
  });

  it('should render App Error', () => {
    const wrapper = shallowWithIntl(<App {...props} isAppError={true} />);
    expect(wrapper).toMatchSnapshot();
  });

  it('should render RouteSwitcher for different parts of the app', () => {
    const wrapper = shallowWithIntl(
      <App
        {...props}
        isVengaCompliant={true}
        location={{ pathname: '/' }}
      />,
    );
    expect(wrapper).toMatchSnapshot();
  });

  it('should Redirect to leadgen route', () => {
    const wrapper = shallowWithIntl(
      <App
        {...props}
        isVengaCompliant={false}
        location={{ pathname: '/' }}
      />,
    );
    expect(wrapper).toMatchSnapshot();
  });

  it('should Redirect to landing route', () => {
    const wrapper = shallowWithIntl(
      <App
        {...props}
        isVengaCompliant={true}
        location={{ pathname: '/leadgen' }}
      />,
    );
    expect(wrapper).toMatchSnapshot();
  });
});
