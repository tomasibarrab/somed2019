import React, { ReactElement, ReactNode, SFC } from 'react';
import { connect } from 'react-redux';
import { getFormValues } from 'redux-form';
import { State } from 'store/types';
import { CUSTOM_PROMOTIONS_FORM_NAME } from './constants';

interface SP {
  monthlyBudgetCap: number;
}

interface OP {
  render: (monthlyBudgetCap: number) => ReactElement<any> | null;
}

type Props = SP & OP;

const WithMonthlyBudget: SFC<Props> = props => props.render(props.monthlyBudgetCap);

const formValuesSelector = getFormValues(CUSTOM_PROMOTIONS_FORM_NAME);

const mapState = (state: State): SP => ({
  monthlyBudgetCap: (formValuesSelector(state) as any).monthlyBudget.cap,
});

export default connect<SP, {}, OP>(mapState)(WithMonthlyBudget);
