import { mount } from 'enzyme';
import React from 'react';
import DayAndTimes from './DayAndTimes';

jest.mock('./Times', () => () => 'Times');

jest.mock('redux-form', () => ({
  FormSection: ({ children }) => children,
}));

const renderComponent = (props: any) => mount(<DayAndTimes {...props} />);

describe('<DayAndTimes />', () => {
  test('has formSection with Times when expanded === true, none when false', () => {
    let wrapper = renderComponent({ expanded: true, label: 'aTestDayAndTimes' });

    let formSection = wrapper.find('[name="atestdayandtimes"]'); // Grab the FormSection
    expect(formSection.length).toEqual(1);

    wrapper = renderComponent({ expanded: false, label: 'aTestLabel' });
    formSection = wrapper.find('[name="atestlabel"]');

    expect(formSection.length).toEqual(0);
  });

  test('clicking the label calls onClickDay with !props.expanded', () => {
    const onClickDay = jest.fn();
    const wrapper = renderComponent({ expanded: false, onClickDay });

    const labelContainer = wrapper.find('.chevron-label-container');

    expect(onClickDay).not.toHaveBeenCalled();
    labelContainer.simulate('click');

    expect(onClickDay).toHaveBeenCalledWith(true);
  });
});
