import React, { SFC } from 'react';
import { FormattedMessage } from 'react-intl';

import { PricingTier } from '../../../store/campaigns/campaigns.types';
import { formatCurrency } from '../helpers/format-number-locale';
import DetailLine, { DetailLineCommonProps } from './DetailLine';

interface ValueProps {
  pricingTier: PricingTier;
  maxBid?: number;
}

type Props = ValueProps & DetailLineCommonProps;

const makeCoverPriceDescription = (pricingTier: PricingTier, maxBid: number | undefined): JSX.Element => {
  const price = maxBid || pricingTier.price;

  return (
    <FormattedMessage
      id="guestcampaigns.terms.cost_per_seated_cover"
      values={{ price: formatCurrency(price, pricingTier.currencyCode) }}
    />
  );
};

/* pricingTier will always exist in the properties of a Custom Promotions campaign, according to BE. */
const CoverPrice: SFC<Props> = ({ pricingTier, maxBid, ...rest }) => (
  <DetailLine value={makeCoverPriceDescription(pricingTier, maxBid)} {...rest} />
);

export default CoverPrice;
