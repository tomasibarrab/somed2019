import moment from 'moment';
import React from 'react';
import { IntlProvider } from 'react-intl';
import { create } from 'react-test-renderer';
import { BadgeType } from '../../store/campaigns/campaigns.types';
import { keys } from '../../translations/bundles/marketing.json';
import RelativeTimeBadge from './RelativeTimeBadge';

describe('RelativeTimeBadge', () => {
  const scenarios = [
    {
      description: 'Resuming in aside w/ className',
      props: {
        badgeType: BadgeType.Resuming,
        time: moment()
          .add(9, 'hours')
          .toDate(),
      },
    },
    {
      description: 'Ending in aside w/ className',
      props: {
        badgeType: BadgeType.Ending,
        time: moment()
          .add(5, 'hours')
          .toDate(),
      },
    },
  ];

  scenarios.forEach(({ props, description }) => {
    it(`should render a RelativeTimeBadge w/ ${description}`, () => {
      const component = create(
        <IntlProvider locale="en-US" messages={keys}>
          <RelativeTimeBadge {...props} />
        </IntlProvider>,
      );
      const tree = component.toJSON();
      expect(tree).toMatchSnapshot();
    });
  });
});
