import moment from 'moment';
import React from 'react';
import { IntlProvider } from 'react-intl';
import { create } from 'react-test-renderer';
import { EndDateType } from '../../../store/campaigns/campaigns.types';
import { keys } from '../../../translations/bundles/marketing.json';
import renderDateRange from './render-date-range';

describe('renderDateRange', () => {
  const inFourDays = moment()
    .add(3, 'day')
    .toDate();
  const today = moment().toDate();

  const scenarios = [
    {
      description: 'startDate today, endDate inFourDays, endDateType null',
      props: {
        endDate: inFourDays,
        endDateType: null,
        startDate: today,
      },
    },
    {
      description: 'startDate today, endDate null, endDateType null',
      props: {
        endDate: null,
        endDateType: null,
        startDate: today,
      },
    },
    {
      description: 'startDate today, endDate inFourDays, endDateType Campaign',
      props: {
        endDate: inFourDays,
        endDateType: EndDateType.Campaign,
        startDate: today,
      },
    },
    {
      description: 'startDate today, endDate null, endDateType Campaign',
      props: {
        endDate: null,
        endDateType: EndDateType.Campaign,
        startDate: today,
      },
    },
    {
      description: 'startDate today, endDate inFourDays, endDateType Reservation',
      props: {
        endDate: inFourDays,
        endDateType: EndDateType.Reservation,
        startDate: today,
      },
    },
    {
      description: 'startDate today, endDate null, endDateType Reservation',
      props: {
        endDate: null,
        endDateType: EndDateType.Reservation,
        startDate: today,
      },
    },
    {
      description: 'startDate today, endDate today, endDateType null',
      props: {
        endDate: today,
        endDateType: null,
        startDate: today,
      },
    },
  ];

  scenarios.map(({ description, props: { endDate, endDateType, startDate } }) => {
    test(description, () => {
      const component = create(
        <IntlProvider locale="en-US" messages={keys}>
          <div>{renderDateRange(startDate, endDate, endDateType)}</div>
        </IntlProvider>,
      );
      const tree = component.toJSON();
      expect(tree).toMatchSnapshot();
    });
  });
});
