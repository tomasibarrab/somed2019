import moment from 'moment';
import React from 'react';
import { IntlProvider } from 'react-intl';
import { create } from 'react-test-renderer';
import { keys } from '../../../translations/bundles/marketing.json';
import renderIncentiveDetails from './render-incentive-details';

describe('renderIncentiveDetails', () => {
  const inFourDays = moment()
    .add(3, 'day')
    .toDate();
  const today = moment().toDate();

  const scenarios = [
    {
      description: 'incentive without tax or service',
      incentive: {
        description: 'Moar Unlimited Water',
        includesService: false,
        includesTax: false,
        name: 'Unlimited Water',
        noteToDiners: 'Terms about unlimited water',
      },
    },
  ];

  scenarios.map(({ description, incentive }) => {
    test(description, () => {
      const component = create(
        <IntlProvider locale="en-US" messages={keys}>
          <ul>{renderIncentiveDetails(incentive).map((lineItem, index) => <li key={`${index}`}>{lineItem}</li>)}</ul>
        </IntlProvider>,
      );
      const tree = component.toJSON();
      expect(tree).toMatchSnapshot();
    });
  });
});
