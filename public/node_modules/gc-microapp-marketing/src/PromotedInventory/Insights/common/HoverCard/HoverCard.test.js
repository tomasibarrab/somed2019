import { shallow } from 'enzyme';
import { shallowToJson } from 'enzyme-to-json';
import React from 'react';

import HoverCard from './HoverCard';

describe('<HoverCard />', () => {
  it('default snapshot', () => {
    const props = {
      title: 'Monday Nov 14, 2018',
      description: 'vs. Monday Nov 16, 2017',
      content: [
        {
          icon: {
            type: 'circle',
            color: '#FCAD03',
            radius: 11,
          },
          label: 'Walk-in',
          value: {
            label: '11%',
            compare: '12%',
          },
          comparison: {
            icon: {
              type: 'arrow',
              color: '#3AA65E',
              direction: 'up',
              height: 11,
            },
            status: 'positive',
            label: '24%',
          },
        },
      ],
    };

    const wrapper = shallow(
      <HoverCard {...props} />
    );
    expect(shallowToJson(wrapper)).toMatchSnapshot();
  });

  it('secondary content is visible', () => {
    const props = {
      title: 'Monday Nov 14, 2018',
      description: 'vs. Monday Nov 16, 2017',
      content: [
        {
          icon: {
            type: 'triangle',
            color: '#FCAD03',
            radius: 11,
          },
          label: 'Walk-in',
          value: {
            label: '11%',
            compare: '12%',
          },
          comparison: {
            icon: {
              type: 'arrow',
              color: '#3AA65E',
              direction: 'up',
              height: 11,
            },
            status: 'positive',
            label: '24%',
          },
          secondary: {
            content: [
              {
                icon: {
                  type: 'icon',
                  color: '#FCAD03',
                  radius: 11,
                },
                label: 'Walk-in',
                value: '11%',
              },
            ],
          },
        },
      ],
    };

    const wrapper = shallow(
      <HoverCard {...props} />
    );
    expect(wrapper.find('.hovercard__content--secondary').length).toEqual(1);
  });
});
