const percentChangeString = (previousValue: number, actualValue: number) => {
  if (!previousValue || !actualValue || actualValue === previousValue) {
    return '';
  }

  let diff = previousValue - actualValue;
  if (previousValue < actualValue) {
    diff = actualValue - previousValue;
  }

  const result = (diff / previousValue) * 100;

  let rounded = Math.round(result);
  if (result < 1) {
    rounded = Math.round(result * 10) / 10;
  }

  return `(${rounded > 999 ? '999+' : rounded}%)`;
};

export default percentChangeString;
