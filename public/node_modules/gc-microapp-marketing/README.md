# gc-monorepo-admin/apps/marketing

A tool for restaurants to manage their marketing content in GuestCenter Admin

## Installation

This document assumes your current working directory is `marketing`

- `$ cd gc-monorepo-admin/apps/marketing`

Ensure you have the following dependencies installed:

- [NVM](https://github.com/creationix/nvm)
  - Run `nvm use` to get the locked down node version from `gc-monorepo-admin/.nvmrc`
  - Recommended: [shell integration](https://github.com/nvm-sh/nvm#deeper-shell-integration)
- [Yarn](https://yarnpkg.com/en/docs/install) >= 1.x

**note:** All relevant commands can be found in package.json.

### Install dependencies, compile components, and bundle source code

- `$ yarn`

#### Translations and local build

Note (Summer 2019) - When you run `yarn`, it will also run `yarn i18n`. This step does not work in our working version of node and will show errors in the terminal. You must use a separate terminal window running node version 8! To do so:

1. Make edits to `marketing.json`, if any.

2. Open a new terminal window

3. `$ nvm install 8` or if already installed `$ nvm use 8`

4. `$ yarn i18n` to update to Smartling

5. Be sure that you switch back to the original terminal window and are running the current node version (You can run `nvm use` to run the required version of node)

## Run unit tests

`$ yarn task test:watch`

## Run the local server: serve micrapp from microsite

1. Start the microapp

- `$ yarn start`

2. Start the microsite: https://github.com/opentable/gc-microsite-profile

   - `$ yarn start`

3. Point your browser to http://localhost:3000/admin/marketing/123
