import { shallow, mount } from 'enzyme';
import React from 'react';
import { FlashMessage } from './FlashMessage';

describe('<FlashMessage />', () => {
  const activeText = 'active content';
  const passiveText = 'passive content';
  const content = {
    passiveContent: <h1>{passiveText}</h1>,
    activeContent: <h1>{activeText}</h1>,
  };

  it('passive', () => {
    const wrapper = shallow(<FlashMessage {...content} />);

    // should render passive content
    expect(wrapper).toMatchSnapshot();
  });

  it('active', () => {
    jest.useFakeTimers();
    const wrapper = mount(<FlashMessage {...content} active />);
    expect(wrapper.text()).toMatch(activeText);
    expect(setTimeout.mock.calls.length).toBe(1);
    expect(setTimeout.mock.calls[0][1]).toBe(5000);
    jest.runAllTimers();
    expect(wrapper.text()).toMatch(passiveText);
  });
});
