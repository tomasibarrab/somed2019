import get from 'lodash/get';

/**
 * Handles deep access for an object that may be an Immutable Map, or regular Object
 * @param {Object} state - The root react state for your app
 * @param {Array<string>} path - Path to the requested data
 */
export function safeGet(state, path) {
  if (state && typeof state.get === 'function') {
    if (path.length === 1) {
      const val = state.getIn(path);
      if (val && typeof val.toJS === 'function') {
        return val.toJS();
      }

      return val;
    }

    const head = path.shift();
    return safeGet(state.get(head), path);
  }

  return get(state, path);
}

export default safeGet;
