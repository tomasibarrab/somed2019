# Yarn Mono

## Description
Task runner for grouping deployment steps for all Microapps together, in TeamCity deployment pipeline

## Entry Points
Monorepo's `build-scripts/pull-request.sh` script is executed by TeamCity for Pull Requests

- Runs `yarn mono publish --pre-publish`
- This triggers a dry-run condition

Monorepo's `build-scripts/build.sh` script is executed by TeamCity after a merge is complete 

- Runs `yarn mono publish`

## Steps

### Pre-Publish

- Test

### Publish

- Build
  - Build microapp into /dist folder, in preparation for upload
- Deploy
  - Uploads Microapp to S3
  - Creates version of Microapp Version API (PP & Prod servers)
  - Promotes version of Microapp Version API (Testing) 

### Post-Publish

  - Promotes version of Microapp Version API (Production environment profiles) 
