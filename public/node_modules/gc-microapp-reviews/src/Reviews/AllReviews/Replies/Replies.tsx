import React from 'react';
import { FormattedDate, FormattedMessage, InjectedIntlProps, injectIntl } from 'react-intl';
import { connect } from 'react-redux';

import { From, Reply } from '../../../store/allReviews/allReviews';
import './Replies.scss';

interface BaseProps {
  replies: Reply[];
}

interface Props extends BaseProps, InjectedIntlProps {}

class Replies extends React.Component<Props> {
  public render() {
    return this.props.replies.map(reply => (
      <div key={reply.ReplyId} className="review-reply">
        <p className="meta">
          <FormattedMessage
            id={`reviews.replies.meta.${reply.From}`}
            values={{
              date: <FormattedDate value={reply.ResponseDateTimeUtc} />,
              name: reply.Name || this.props.intl.formatMessage({ id: 'reviews.allReviews.defaultNickName' }),
            }}
          />
        </p>
        <p>{reply.Message}</p>
      </div>
    ));
  }
}

export default injectIntl<BaseProps>(Replies);
