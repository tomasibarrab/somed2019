import { Badge, LikeIcon } from 'gca-react-components';
import React from 'react';
import { FormattedMessage, InjectedIntlProps, injectIntl } from 'react-intl';

import { Review } from '../../../store/allReviews/allReviews';

import './ReviewHeader.scss';

interface BaseProps {
  review: Review;
}

interface Props extends BaseProps, InjectedIntlProps {}

export class ReviewHeader extends React.Component<Props> {
  public render() {
    const { CustomerNickname, DinedDateTime, HasNewReply, Recommended, SubmissionDateTimeUtc } = this.props.review;

    const nickName = CustomerNickname ? (
      <h4>{CustomerNickname}</h4>
    ) : (
      <FormattedMessage tagName="h4" id="reviews.allReviews.defaultNickName" />
    );

    return (
      <div className="gca-review-header">
        {HasNewReply && <Badge text={this.props.intl.formatMessage({ id: 'reviews.allReviews.newResponse' })} />}
        {nickName}
        <span className="review-meta">
          <FormattedMessage id="reviews.allReviews.reviewDate" values={{ reviewDate: SubmissionDateTimeUtc }} />
        </span>
        <span>·</span>
        <span className="review-meta">
          <FormattedMessage id="reviews.allReviews.visitDate" values={{ visitDate: DinedDateTime }} />
        </span>
        {Recommended && (
          <span>
            <span>·</span>
            <LikeIcon height="16" />
            <span className="review-meta">
              <FormattedMessage id={'reviews.allReviews.dinerRecommends'} />
            </span>
          </span>
        )}
      </div>
    );
  }
}

export default injectIntl<BaseProps>(ReviewHeader);
