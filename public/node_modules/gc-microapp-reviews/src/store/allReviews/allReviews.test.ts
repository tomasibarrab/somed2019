import { reviewFromDTO } from './allReviews';

describe('allReviews', () => {
  describe('reviewFromDTO', () => {
    it('should initialize a blank Replies array', () => {
      expect(reviewFromDTO('2001-01-01')({}).Replies).toEqual([]);
    });

    it('should return HasNewReply=false if all the replies occur before the lastVisit date', () => {
      expect(reviewFromDTO('2001-01-01')({ Replies: [{ ResponseDateTimeUtc: '1999-01-01' }] }).HasNewReply).toEqual(
        false,
      );
    });

    it('should return HasNewReply=true if any of the replies occur after the lastVisit date', () => {
      expect(
        reviewFromDTO('2001-01-01')({
          Replies: [{ ResponseDateTimeUtc: '1999-01-01' }, { ResponseDateTimeUtc: '2002-01-01' }],
        }).HasNewReply,
      ).toEqual(true);
    });
  });
});
