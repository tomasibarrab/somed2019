import { Button } from '@buffet/button';
import React, { useRef } from 'react';
import { FormattedMessage } from 'react-intl';
import { Photo } from '../common/types';
import Guidelines from '../Guidelines/Guidelines';

interface Props {
  photos: Photo[];
  handleUploadPhoto: (e: any) => void;
}

function Upload({ photos, handleUploadPhoto }: Props) {
  const fileInput = useRef<HTMLInputElement>(null);
  const invokeFileSelection = () => {
    if (fileInput && fileInput.current) {
      fileInput.current.click();
    }
  };

  return (
    <>
      {photos.length > 0 ? (
        // Upload box UI for restaurants with photos
        <></>
      ) : (
        <>
          <div className="photo-upload">
            <img src={require('../assets/Empty_States_Photo.svg')} alt="" className="photo-upload__empty-state-image" />
            <h1 className="photo-upload__header">
              <FormattedMessage id="galleryPhotos.photoUpload.header" />
            </h1>
            <p className="photo-upload__description">
              <FormattedMessage id="galleryPhotos.photoUpload.description.1" />
            </p>
            <Button onClick={invokeFileSelection} className="photo-upload__upload-button" type="button" theme="primary">
              <FormattedMessage id="galleryPhotos.photoUpload.uploadButton" />
              <input
                type="file"
                data-testid="select-image-file"
                ref={fileInput}
                id="js-select-image-file"
                onChange={handleUploadPhoto}
                multiple
                hidden
              />
            </Button>
            <p className="photo-upload__instruction">
              <FormattedMessage id="galleryPhotos.photoUpload.description.2" />
            </p>
          </div>
          <Guidelines />
        </>
      )}
    </>
  );
}

export default Upload;
