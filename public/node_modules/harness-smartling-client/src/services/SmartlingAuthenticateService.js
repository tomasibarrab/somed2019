module.exports = function (SmartlingBaseService, SmartlingConstants, HTTPService, HTTPLogging) {
  class SmartlingAuthenticateService extends SmartlingBaseService {

    static fetch(userIdentifier, userSecret) {
      return new SmartlingAuthenticateService().fetch(userIdentifier, userSecret);
    }

    fetch(userIdentifier, userSecret) {
      return HTTPService.post(this.getRequestUrl())
        .set('Content-Type', 'application/json')
        .send({
          userIdentifier,
          userSecret
        })
        .plugin(HTTPLogging)
        .promiseBody()
        .then(this.validateResponse);
    }

    getRequestUrl() {
      return `${SmartlingConstants.host}/auth-api/v2/authenticate`;
    }
  }

  return SmartlingAuthenticateService;
};
