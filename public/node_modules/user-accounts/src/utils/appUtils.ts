import { titleIds } from '../constants';
import { GuestCenterScope } from '../store/types';


export const getContextUrn = (gcScope: GuestCenterScope) => {
  // TODO: get URN base from somewhere else maybe?
  const urnBase = gcScope.type === 'group' ? 'urn:ot.groups' : 'urn:ot.restaurants';
  const id = (gcScope.type === 'restaurant' && gcScope.rid) || gcScope.id;
  return `${urnBase}:${id}`;
};

export const getUserTitle = (title: string) => titleIds.find(t => t === title) || [...titleIds].pop();

export const getUserId = (userUrn: string) => (
  userUrn.includes(':')
    ? userUrn.substr(userUrn.lastIndexOf(':') + 1)
    : userUrn
);

export const cleanId = (idString: string) =>
  idString
    .toLowerCase()
    .replace(/[\s:.]+/gi, '-');
