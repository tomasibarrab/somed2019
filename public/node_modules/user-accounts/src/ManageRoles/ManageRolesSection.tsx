import React from 'react';

import { ContextType, Permission, Role } from '../store/types';
import { isGroupAccessType, isRestaurantAccessType, isRestaurantPermission } from '../utils/contextHelpers';
import ManageAccessTypes from './ManageAccessTypes';

import './ManageRoles.scss';


interface RolesSectionProps {
  scopeType: ContextType;
  roles: Role[];
  permissions: Permission[];
}


const ManageRolesSection: React.FunctionComponent<RolesSectionProps> = ({
  permissions,
  roles,
  scopeType,
}) => {
  // for Groups, we show Group and Restaurant Access Types separately
  if (scopeType === 'group') {
    return (
      <>
        <ManageAccessTypes
          scopeType={scopeType}
          roles={roles.filter(isGroupAccessType)}
          permissions={permissions}
        />
        <ManageAccessTypes
          scopeType={'restaurant'}
          roles={roles.filter(isRestaurantAccessType)}
          // filter restaurant features
          permissions={permissions.filter(isRestaurantPermission)}
        />
      </>
    );
  }

  // for Restaurants, we only show Restaurant Access Types
  return (
    <ManageAccessTypes
      scopeType={scopeType}
      roles={roles}
      permissions={permissions}
      skipIntro // there's already a page intro, so skip this one
    />
  );
};

export default ManageRolesSection;
